import { ChevronFirst, ChevronLast, MoreVertical } from "lucide-react";
import { createContext, useContext, useState } from "react";
import { Link } from "react-router-dom";

const SidebarContext = createContext();

export default function Sidebar({ children }) {
	const [expanded, setExpanded] = useState(false);
	return (
		<>
			<aside className="h-screen z-10 ">
				<nav className="h-full flex flex-col bg-gradient-to-b from-[#836FFF] pb-5 to-[#4F4399] border-r shadow-sm">
					<div className="p-4 pb-2 flex justify-between items-center">
						<svg
							className={`overflow-hidden transition-all ${expanded ? "w-24 h-12" : "size-0"}`}
							viewBox="0 0 85 53"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M10.9526 5C11.2664 5.1958 11.151 5.67618 11.151 5.98375C10.7142 14.5125 10.1786 23.7048 10.7142 33.1412C10.7142 36.3017 11.3162 39.352 11.1835 42.3691C10.7749 42.3366 10.4991 41.8863 10.2268 41.5748C9.93855 41.2442 9.64961 40.8978 9.33648 40.6291C7.70447 38.5926 5.8478 36.813 4.25726 34.729C1.96166 31.8086 -0.537857 27.8752 0.101538 22.0963C0.294394 20.35 0.74992 19.0246 1.32226 17.6334C1.87664 16.2866 2.48216 15.0991 3.26741 14.0028C4.78329 11.8878 6.59503 10.0694 8.24778 7.9893C8.6093 7.53429 9.08902 7.02458 9.53348 6.51407C10.0208 5.95521 10.4542 5.34958 10.9194 5.00079C10.9312 5 10.9422 5 10.9526 5Z"
								fill="#6B8E23"
							/>
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M33.0774 0.856087C37.735 0.597623 41.7363 1.942 44.7663 3.77591C45.7996 4.40152 46.7151 5.1486 47.651 5.91121C51.1011 8.72327 54.2528 13.3035 54.7317 19.6381C54.9932 23.0959 54.1154 26.2459 53.0091 28.5711C51.8501 31.0042 50.4298 32.9513 48.7385 34.5843C46.1286 37.1041 43.0837 38.8211 39.1099 39.8568C36.5408 40.5272 33.3247 40.6916 30.4188 40.1618C25.0074 39.1764 20.8742 36.7297 17.6809 33.0153C16.9067 32.1147 16.0634 31.1576 15.546 30.0087C14.4939 27.6715 13.2227 25.1033 13.2227 21.7296C13.2234 19.8235 13.2494 18.2042 13.5972 16.7183C14.5959 12.4605 16.6319 9.20549 19.179 6.73957C22.0944 3.91747 25.9276 1.72281 30.7925 1.03053C31.5463 0.922758 32.3417 0.896272 33.0774 0.856087Z"
								fill="white"
							/>
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M14.8617 46.2194C16.0637 47.9673 16.9356 43.5796 19.3549 42.4791C21.7743 41.3785 25.4206 43.1798 30.4148 43.6682C32.2804 43.8505 34.8126 44.3922 36.5864 44.1853C37.1145 44.1234 37.7262 43.7065 38.1693 44.1472C38.2108 44.7766 37.673 45.1516 37.3453 45.5091C34.8977 48.1734 32.7278 51.2451 28.9682 52.4683C26.6429 53.2245 23.918 53.1587 21.7786 52.3549C19.7242 51.5836 17.9595 50.3478 16.5673 48.8749C16.277 48.5674 15.9756 48.1124 15.5775 47.6653C15.2782 47.3284 14.7376 46.8837 14.6215 46.4168C14.4397 45.6883 14.5158 45.0303 14.5158 45.0303L14.8617 46.2194Z"
								fill="#6B8E23"
							/>
							<path
								d="M17.85 30V12.5H24.4C25.8833 12.5 27.1583 12.7417 28.225 13.225C29.2917 13.6917 30.1083 14.375 30.675 15.275C31.2583 16.1583 31.55 17.2333 31.55 18.5C31.55 19.7333 31.2583 20.8 30.675 21.7C30.1083 22.5833 29.2917 23.2667 28.225 23.75C27.1583 24.2333 25.8833 24.475 24.4 24.475H18.875L19.7 23.6V30H17.85ZM19.7 23.75L18.875 22.85H24.35C26.1 22.85 27.425 22.475 28.325 21.725C29.2417 20.9583 29.7 19.8833 29.7 18.5C29.7 17.1 29.2417 16.0167 28.325 15.25C27.425 14.4833 26.1 14.1 24.35 14.1H18.875L19.7 13.225V23.75ZM43.4443 30.15C42.1277 30.15 40.9027 29.9333 39.7693 29.5C38.6527 29.05 37.6777 28.425 36.8443 27.625C36.0277 26.8083 35.386 25.8667 34.9193 24.8C34.4693 23.7167 34.2443 22.5333 34.2443 21.25C34.2443 19.9667 34.4693 18.7917 34.9193 17.725C35.386 16.6417 36.0277 15.7 36.8443 14.9C37.6777 14.0833 38.6527 13.4583 39.7693 13.025C40.886 12.575 42.111 12.35 43.4443 12.35C44.761 12.35 45.9777 12.575 47.0943 13.025C48.211 13.4583 49.1777 14.075 49.9943 14.875C50.8277 15.675 51.4693 16.6167 51.9193 17.7C52.386 18.7833 52.6193 19.9667 52.6193 21.25C52.6193 22.5333 52.386 23.7167 51.9193 24.8C51.4693 25.8833 50.8277 26.825 49.9943 27.625C49.1777 28.425 48.211 29.05 47.0943 29.5C45.9777 29.9333 44.761 30.15 43.4443 30.15ZM43.4443 28.5C44.4943 28.5 45.461 28.325 46.3443 27.975C47.2443 27.6083 48.0193 27.1 48.6693 26.45C49.336 25.7833 49.8527 25.0167 50.2193 24.15C50.586 23.2667 50.7693 22.3 50.7693 21.25C50.7693 20.2 50.586 19.2417 50.2193 18.375C49.8527 17.4917 49.336 16.725 48.6693 16.075C48.0193 15.4083 47.2443 14.9 46.3443 14.55C45.461 14.1833 44.4943 14 43.4443 14C42.3943 14 41.4193 14.1833 40.5193 14.55C39.6193 14.9 38.836 15.4083 38.1693 16.075C37.5193 16.725 37.0027 17.4917 36.6193 18.375C36.2527 19.2417 36.0693 20.2 36.0693 21.25C36.0693 22.2833 36.2527 23.2417 36.6193 24.125C37.0027 25.0083 37.5193 25.7833 38.1693 26.45C38.836 27.1 39.6193 27.6083 40.5193 27.975C41.4193 28.325 42.3943 28.5 43.4443 28.5Z"
								fill="#836FFF"
							/>
							<path
								d="M56.766 30V12.5H58.616V28.4H68.416V30H56.766ZM73.8072 30V23.5L74.2322 24.65L66.8072 12.5H68.7822L75.3072 23.175H74.2572L80.7822 12.5H82.6322L75.2072 24.65L75.6322 23.5V30H73.8072Z"
								fill="white"
							/>
						</svg>

						<button
							onClick={() => setExpanded((curr) => !curr)}
							className="p-1.5 rounded-lg bg-gray-50 hover:bg-gray-200 focus:outline-none"
						>
							{expanded ? <ChevronFirst /> : <ChevronLast />}
						</button>
					</div>

					<SidebarContext.Provider value={{ expanded }}>
						<ul className="flex-1 px-3 text-white">{children}</ul>
					</SidebarContext.Provider>

					<div className="border-t flex p-3 -mb-2 pb-0">
						{/* <img src={profile} className="w-10 h-10 rounded-md" /> */}
						<svg className="size-10 rounded-md" viewBox="0 0 85 53" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M10.9526 5C11.2664 5.1958 11.151 5.67618 11.151 5.98375C10.7142 14.5125 10.1786 23.7048 10.7142 33.1412C10.7142 36.3017 11.3162 39.352 11.1835 42.3691C10.7749 42.3366 10.4991 41.8863 10.2268 41.5748C9.93855 41.2442 9.64961 40.8978 9.33648 40.6291C7.70447 38.5926 5.8478 36.813 4.25726 34.729C1.96166 31.8086 -0.537857 27.8752 0.101538 22.0963C0.294394 20.35 0.74992 19.0246 1.32226 17.6334C1.87664 16.2866 2.48216 15.0991 3.26741 14.0028C4.78329 11.8878 6.59503 10.0694 8.24778 7.9893C8.6093 7.53429 9.08902 7.02458 9.53348 6.51407C10.0208 5.95521 10.4542 5.34958 10.9194 5.00079C10.9312 5 10.9422 5 10.9526 5Z"
								fill="#6B8E23"
							/>
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M33.0774 0.856087C37.735 0.597623 41.7363 1.942 44.7663 3.77591C45.7996 4.40152 46.7151 5.1486 47.651 5.91121C51.1011 8.72327 54.2528 13.3035 54.7317 19.6381C54.9932 23.0959 54.1154 26.2459 53.0091 28.5711C51.8501 31.0042 50.4298 32.9513 48.7385 34.5843C46.1286 37.1041 43.0837 38.8211 39.1099 39.8568C36.5408 40.5272 33.3247 40.6916 30.4188 40.1618C25.0074 39.1764 20.8742 36.7297 17.6809 33.0153C16.9067 32.1147 16.0634 31.1576 15.546 30.0087C14.4939 27.6715 13.2227 25.1033 13.2227 21.7296C13.2234 19.8235 13.2494 18.2042 13.5972 16.7183C14.5959 12.4605 16.6319 9.20549 19.179 6.73957C22.0944 3.91747 25.9276 1.72281 30.7925 1.03053C31.5463 0.922758 32.3417 0.896272 33.0774 0.856087Z"
								fill="white"
							/>
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M14.8617 46.2194C16.0637 47.9673 16.9356 43.5796 19.3549 42.4791C21.7743 41.3785 25.4206 43.1798 30.4148 43.6682C32.2804 43.8505 34.8126 44.3922 36.5864 44.1853C37.1145 44.1234 37.7262 43.7065 38.1693 44.1472C38.2108 44.7766 37.673 45.1516 37.3453 45.5091C34.8977 48.1734 32.7278 51.2451 28.9682 52.4683C26.6429 53.2245 23.918 53.1587 21.7786 52.3549C19.7242 51.5836 17.9595 50.3478 16.5673 48.8749C16.277 48.5674 15.9756 48.1124 15.5775 47.6653C15.2782 47.3284 14.7376 46.8837 14.6215 46.4168C14.4397 45.6883 14.5158 45.0303 14.5158 45.0303L14.8617 46.2194Z"
								fill="#6B8E23"
							/>
							<path
								d="M17.85 30V12.5H24.4C25.8833 12.5 27.1583 12.7417 28.225 13.225C29.2917 13.6917 30.1083 14.375 30.675 15.275C31.2583 16.1583 31.55 17.2333 31.55 18.5C31.55 19.7333 31.2583 20.8 30.675 21.7C30.1083 22.5833 29.2917 23.2667 28.225 23.75C27.1583 24.2333 25.8833 24.475 24.4 24.475H18.875L19.7 23.6V30H17.85ZM19.7 23.75L18.875 22.85H24.35C26.1 22.85 27.425 22.475 28.325 21.725C29.2417 20.9583 29.7 19.8833 29.7 18.5C29.7 17.1 29.2417 16.0167 28.325 15.25C27.425 14.4833 26.1 14.1 24.35 14.1H18.875L19.7 13.225V23.75ZM43.4443 30.15C42.1277 30.15 40.9027 29.9333 39.7693 29.5C38.6527 29.05 37.6777 28.425 36.8443 27.625C36.0277 26.8083 35.386 25.8667 34.9193 24.8C34.4693 23.7167 34.2443 22.5333 34.2443 21.25C34.2443 19.9667 34.4693 18.7917 34.9193 17.725C35.386 16.6417 36.0277 15.7 36.8443 14.9C37.6777 14.0833 38.6527 13.4583 39.7693 13.025C40.886 12.575 42.111 12.35 43.4443 12.35C44.761 12.35 45.9777 12.575 47.0943 13.025C48.211 13.4583 49.1777 14.075 49.9943 14.875C50.8277 15.675 51.4693 16.6167 51.9193 17.7C52.386 18.7833 52.6193 19.9667 52.6193 21.25C52.6193 22.5333 52.386 23.7167 51.9193 24.8C51.4693 25.8833 50.8277 26.825 49.9943 27.625C49.1777 28.425 48.211 29.05 47.0943 29.5C45.9777 29.9333 44.761 30.15 43.4443 30.15ZM43.4443 28.5C44.4943 28.5 45.461 28.325 46.3443 27.975C47.2443 27.6083 48.0193 27.1 48.6693 26.45C49.336 25.7833 49.8527 25.0167 50.2193 24.15C50.586 23.2667 50.7693 22.3 50.7693 21.25C50.7693 20.2 50.586 19.2417 50.2193 18.375C49.8527 17.4917 49.336 16.725 48.6693 16.075C48.0193 15.4083 47.2443 14.9 46.3443 14.55C45.461 14.1833 44.4943 14 43.4443 14C42.3943 14 41.4193 14.1833 40.5193 14.55C39.6193 14.9 38.836 15.4083 38.1693 16.075C37.5193 16.725 37.0027 17.4917 36.6193 18.375C36.2527 19.2417 36.0693 20.2 36.0693 21.25C36.0693 22.2833 36.2527 23.2417 36.6193 24.125C37.0027 25.0083 37.5193 25.7833 38.1693 26.45C38.836 27.1 39.6193 27.6083 40.5193 27.975C41.4193 28.325 42.3943 28.5 43.4443 28.5Z"
								fill="#836FFF"
							/>
							<path
								d="M56.766 30V12.5H58.616V28.4H68.416V30H56.766ZM73.8072 30V23.5L74.2322 24.65L66.8072 12.5H68.7822L75.3072 23.175H74.2572L80.7822 12.5H82.6322L75.2072 24.65L75.6322 23.5V30H73.8072Z"
								fill="white"
							/>
						</svg>
						<div
							className={`flex justify-between items-center overflow-hidden transition-all ${
								expanded ? "w-52 ml-3" : "w-0"
							} `}
						>
							<div className="leading-4">
								<h4 className="font-semibold text-white">POLY</h4>
								<span className="text-xs text-white">poly@gmail.com</span>
							</div>
							<MoreVertical size={20} color="#fff" />
						</div>
					</div>
				</nav>
			</aside>
		</>
	);
}

export function SidebarItem({ path, icon, text, active, alert,onClick }) {
	const { expanded } = useContext(SidebarContext);
	return (
		<Link
			to={path}
			className={`relative flex items-center py-2 px-3 my-1 font-medium rounded-md cursor-pointer transition-colors group ${
				active ? "bg-gradient-to-tr from-slate-600 to-slate-500 text-white" : "hover:bg-slate-600 text-white"
			}`}
		>
			{icon}
			<span className={`overflow-hidden transition-all ${expanded ? "w-52 ml-3" : "w-0"}`}>{text}</span>
			{alert && <div className={`absolute right-2 w-2 h-2 rounded bg-indigo-400 ${expanded ? "" : "top-2"}`}></div>}

			{!expanded && (
				<div
					className={`absolute left-full rounded-md px-2 py-1 ml-6 bg-[#322483] text-white text-sm invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0`}
				>
					{text}
				</div>
			)}
		</Link>
	);
}
